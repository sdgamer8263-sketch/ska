<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Neon Login/Register</title>
<style>
body{
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    font-family:Arial,sans-serif;
    background:linear-gradient(-45deg,#ff00ff,#00ffff,#ff0000,#00ff00);
    background-size:400% 400%;
    animation:gradientBG 15s ease infinite;
}
@keyframes gradientBG{
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}
.neon-button{
    padding:20px 50px;
    font-size:2rem;
    color:#fff;
    text-transform:uppercase;
    letter-spacing:2px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    background:transparent;
    box-shadow:0 0 5px #fff,0 0 10px #fff,0 0 20px #ff00ff,0 0 40px #ff00ff;
    transition:0.3s;
}
.neon-button:hover{
    box-shadow:0 0 10px #fff,0 0 20px #fff,0 0 40px #ff00ff,0 0 80px #ff00ff;
}
.modal{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    display:none;
    justify-content:center;
    align-items:center;
    background:rgba(0,0,0,0.85);
}
.modal-content{
    background:#111;
    padding:30px;
    border-radius:15px;
    text-align:center;
    color:#fff;
    width:320px;
    box-shadow:0 0 20px #ff00ff;
    animation:popIn 0.5s ease;
}
@keyframes popIn{
    0%{transform:scale(0.5);opacity:0}
    100%{transform:scale(1);opacity:1}
}
.tabs{display:flex;justify-content:space-around;margin-bottom:20px;}
.tabs button{
    background:none;
    border:1px solid #ff00ff;
    color:#fff;
    padding:5px 15px;
    cursor:pointer;
    border-radius:5px;
    transition:0.3s;
}
.tabs button.active{background:#ff00ff;color:#111;}
.modal-content input{
    padding:10px;
    margin:10px 0;
    width:90%;
    border-radius:5px;
    border:none;
    outline:none;
    background:#222;
    color:#fff;
    box-shadow:0 0 5px #ff00ff;
    transition:0.3s;
}
.modal-content input:focus{
    box-shadow:0 0 10px #ff00ff,0 0 20px #ff00ff;
}
.modal-content button{
    padding:10px 20px;
    margin-top:10px;
    border:none;
    border-radius:5px;
    cursor:pointer;
    background:#ff00ff;
    color:#fff;
    box-shadow:0 0 10px #ff00ff;
    transition:0.3s;
}
.modal-content button:hover{
    box-shadow:0 0 20px #ff00ff,0 0 40px #ff00ff;
}
.error{color:#ff5555;font-size:0.9rem;min-height:18px;}
</style>
</head>
<body>

<button class="neon-button" id="getStartedBtn">Get Started</button>

<div class="modal" id="authModal">
<div class="modal-content">
<div class="tabs">
<button id="loginTab" class="active">Login</button>
<button id="registerTab">Register</button>
</div>

<div id="loginForm">
<input type="text" id="loginUser" placeholder="Username or Email">
<input type="password" id="loginPass" placeholder="Password">
<div class="error" id="loginError"></div>
<button id="loginBtn">Login</button>
</div>

<div id="registerForm" style="display:none;">
<input type="text" id="regUser" placeholder="Username">
<input type="email" id="regEmail" placeholder="Email">
<input type="password" id="regPass" placeholder="Password">
<div class="error" id="regError"></div>
<button id="registerBtn">Register</button>
</div>

</div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// ✅ Paste your Firebase config here
// Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyBvlOV7L3g_lBDRR7mcNincGVyM16xtd90",
  authDomain: "ska-web-168fe.firebaseapp.com",
  projectId: "ska-web-168fe",
  storageBucket: "ska-web-168fe.firebasestorage.app",
  messagingSenderId: "782823377176",
  appId: "1:782823377176:web:e2f62ba16d5fe0af7f366d",
  measurementId: "G-FFZ7V1ZSVZ"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const getStartedBtn=document.getElementById('getStartedBtn');
const authModal=document.getElementById('authModal');
const loginTab=document.getElementById('loginTab');
const registerTab=document.getElementById('registerTab');
const loginForm=document.getElementById('loginForm');
const registerForm=document.getElementById('registerForm');
const loginBtn=document.getElementById('loginBtn');
const registerBtn=document.getElementById('registerBtn');
const loginError=document.getElementById('loginError');
const regError=document.getElementById('regError');

getStartedBtn.addEventListener('click',()=>authModal.style.display='flex');
loginTab.addEventListener('click',()=>{
    loginForm.style.display='block';
    registerForm.style.display='none';
    loginTab.classList.add('active');
    registerTab.classList.remove('active');
});
registerTab.addEventListener('click',()=>{
    loginForm.style.display='none';
    registerForm.style.display='block';
    registerTab.classList.add('active');
    loginTab.classList.remove('active');
});

// ✅ Registration using Firebase
registerBtn.addEventListener('click', e=>{
    e.preventDefault();
    regError.textContent="";
    const username=document.getElementById('regUser').value.trim();
    const email=document.getElementById('regEmail').value.trim();
    const password=document.getElementById('regPass').value.trim();
    if(!username||!email||!password){regError.textContent="All fields required!"; return;}
    if(!/^[^ ]+@[^ ]+\.[a-z]{2,}$/i.test(email)){regError.textContent="Invalid email!"; return;}

    // Check if user exists
    db.ref("users").orderByChild("email").equalTo(email).get().then(snapshot=>{
        if(snapshot.exists()){regError.textContent="Email already registered!"; return;}
        else{
            // Save new user
            db.ref("users").push({username,email,password}).then(()=>{
                window.location.href="https://sites.google.com/view/ska-hosting67/home";
            }).catch(err=>{regError.textContent="Error saving user!"});
        }
    });
});

// ✅ Login using Firebase
loginBtn.addEventListener('click', e=>{
    e.preventDefault();
    loginError.textContent="";
    const userInput=document.getElementById('loginUser').value.trim();
    const password=document.getElementById('loginPass').value.trim();
    if(!userInput||!password){loginError.textContent="All fields required!"; return;}

    db.ref("users").get().then(snapshot=>{
        let found=false;
        snapshot.forEach(child=>{
            const u=child.val();
            if((u.username===userInput||u.email===userInput) && u.password===password){
                found=true;
            }
        });
        if(found){window.location.href="https://sites.google.com/view/ska-hosting67/home";}
        else{loginError.textContent="Invalid username/email or password!";}
    });
});

// Close modal if clicked outside
window.addEventListener('click', e=>{if(e.target===authModal) authModal.style.display='none';});
</script>
</body>
</html>
